<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Cyber Sprint | Girls & Boys Day</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');

        :root {
            --bg-dark: #0a0a1a;
            --player-cyan: #22d3ee;
            --energy-green: #4ade80;
            --danger-red: #f43f5e;
            --neon-purple: #a855f7;
            --font-main: 'Press Start 2P', cursive;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: linear-gradient(135deg, #0a0a1a 0%, #1a1a3a 100%);
            color: white;
            font-family: var(--font-main);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            overflow: hidden;
            touch-action: none;
        }

        #game-container {
            position: relative;
            width: 100%;
            max-width: 800px;
            aspect-ratio: 16/9;
            background: var(--bg-dark);
            border: 4px solid var(--neon-purple);
            border-radius: 8px;
            box-shadow: 0 0 30px rgba(168, 85, 247, 0.3);
            overflow: hidden;
        }

        canvas {
            width: 100%;
            height: 100%;
            display: block;
        }

        .overlay {
            position: absolute;
            inset: 0;
            background: rgba(10, 10, 26, 0.95);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 20;
            text-align: center;
            padding: 20px;
        }

        .hidden {
            display: none !important;
        }

        .hud {
            position: absolute;
            top: 15px;
            left: 15px;
            right: 15px;
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            font-size: 10px;
            z-index: 10;
            pointer-events: none;
        }

        .hud-left,
        .hud-right {
            background: rgba(0, 0, 0, 0.5);
            padding: 10px 15px;
            border-radius: 8px;
            border: 2px solid var(--neon-purple);
        }

        .energy-bar {
            width: 120px;
            height: 14px;
            background: #1e293b;
            border: 2px solid #fff;
            border-radius: 4px;
            margin-top: 8px;
            overflow: hidden;
        }

        #energy-inner {
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, var(--energy-green), #86efac);
            transition: width 0.3s ease;
        }

        .title {
            color: var(--player-cyan);
            font-size: 24px;
            text-shadow: 0 0 20px var(--player-cyan);
            margin-bottom: 20px;
        }

        .subtitle {
            font-size: 10px;
            color: var(--neon-purple);
            margin-bottom: 30px;
        }

        .instructions {
            font-size: 8px;
            color: #94a3b8;
            line-height: 2;
            margin-bottom: 20px;
        }

        .btn {
            background: linear-gradient(135deg, var(--player-cyan), #06b6d4);
            color: var(--bg-dark);
            border: none;
            padding: 15px 40px;
            font-family: var(--font-main);
            font-size: 12px;
            cursor: pointer;
            border-radius: 8px;
            box-shadow: 0 6px 0 #0891b2, 0 0 20px rgba(34, 211, 238, 0.4);
            transition: transform 0.1s, box-shadow 0.1s;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 0 #0891b2, 0 0 30px rgba(34, 211, 238, 0.6);
        }

        .btn:active {
            transform: translateY(4px);
            box-shadow: 0 2px 0 #0891b2;
        }

        .game-over-title {
            color: var(--danger-red);
            font-size: 20px;
            text-shadow: 0 0 20px var(--danger-red);
        }

        .final-score {
            font-size: 14px;
            margin: 20px 0;
            color: var(--energy-green);
        }

        @media (max-width: 600px) {
            .title {
                font-size: 16px;
            }

            .instructions {
                font-size: 7px;
            }

            .btn {
                padding: 12px 30px;
                font-size: 10px;
            }

            .hud {
                font-size: 8px;
            }
        }
    </style>
</head>

<body>

    <div id="game-container">
        <div class="hud">
            <div class="hud-left">
                PUNKTE: <span id="score">0</span>
                <div class="energy-bar">
                    <div id="energy-inner"></div>
                </div>
            </div>
            <div class="hud-right">
                LEVEL: <span id="level">1</span>
            </div>
        </div>

        <div id="start-screen" class="overlay">
            <h1 class="title">CYBER SPRINT</h1>
            <p class="subtitle">Girls & Boys Day Edition</p>
            <div class="instructions">
                üéÆ STEUERUNG:<br><br>
                [LEERTASTE] oder [TIPPEN] = SPRINGEN<br>
                Doppelt dr√ºcken = DOPPELSPRUNG!<br><br>
                üçè Sammle gr√ºne ENERGIE-ORBS<br>
                ‚ö†Ô∏è Weiche roten SPIKES aus!
            </div>
            <button class="btn" onclick="startGame()">STARTEN</button>
        </div>

        <div id="game-over-screen" class="overlay hidden">
            <h1 class="game-over-title">GAME OVER</h1>
            <p style="margin-top: 15px; font-size: 9px;">Deine Energie ist aufgebraucht!</p>
            <p class="final-score">ENDPUNKTE: <span id="final-score">0</span></p>
            <button class="btn" onclick="startGame()">NOCHMAL</button>
        </div>

        <canvas id="gameCanvas"></canvas>
    </div>

    <script>
        // === GAME SETUP ===
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const scoreEl = document.getElementById('score');
        const energyInner = document.getElementById('energy-inner');
        const levelEl = document.getElementById('level');
        const finalScoreEl = document.getElementById('final-score');

        canvas.width = 800;
        canvas.height = 450;

        // === GAME STATE ===
        let gameActive = false;
        let score = 0;
        let energy = 100;      // Energie: 0-100%
        let gameSpeed = 5;
        let frame = 0;
        let obstacles = [];
        let particles = [];

        // === PHYSIK-KONSTANTEN ===
        // Diese Werte bestimmen, wie der Sprung funktioniert!
        const GRAVITY = 0.6;       // Erdanziehung: Je h√∂her, desto schneller f√§llt man
        const JUMP_FORCE = -13;    // Sprungkraft: Negativ = nach oben

        // === ENERGIE-MATHEMATIK ===
        const ENERGY_LOSS = 25;    // Energie-Verlust bei Hindernis-Kollision
        const ENERGY_GAIN = 15;    // Energie-Gewinn bei Food-Sammlung

        // === SPIELER-OBJEKT ===
        const player = {
            x: 80,
            y: 320,
            w: 40,
            h: 50,
            velocityY: 0,          // Aktuelle Geschwindigkeit in Y-Richtung
            jumps: 0,
            maxJumps: 2,
            isHurt: false,
            hurtTimer: 0,

            // PHYSIK: Update-Funktion f√ºr Bewegung
            update() {
                // Schwerkraft zur Geschwindigkeit addieren
                this.velocityY += GRAVITY;

                // Geschwindigkeit zur Position addieren
                this.y += this.velocityY;

                // Boden-Kollision pr√ºfen
                if (this.y + this.h > 400) {
                    this.y = 400 - this.h;
                    this.velocityY = 0;
                    this.jumps = 0;
                }

                // Hurt-Animation Timer
                if (this.isHurt) {
                    this.hurtTimer--;
                    if (this.hurtTimer <= 0) this.isHurt = false;
                }
            },

            // SPRINGEN: Sprungkraft anwenden
            jump() {
                if (this.jumps < this.maxJumps) {
                    this.velocityY = JUMP_FORCE;
                    this.jumps++;
                    createParticles(this.x + 20, this.y + 50, '#a855f7', 6);
                }
            },

            // ZEICHNEN: Spieler-Grafik
            draw() {
                ctx.save();

                // Blinken wenn verletzt
                if (this.isHurt && Math.floor(frame / 4) % 2 === 0) {
                    ctx.globalAlpha = 0.3;
                }

                const bounce = this.velocityY === 0 ? Math.sin(frame * 0.15) * 2 : 0;
                const drawY = this.y + bounce;

                // Glow-Effekt
                ctx.shadowBlur = 15;
                ctx.shadowColor = '#22d3ee';

                // K√∂rper
                ctx.fillStyle = '#1e293b';
                ctx.fillRect(this.x + 5, drawY + 15, 30, 30);

                // Neon-Linien auf dem Anzug
                ctx.fillStyle = '#22d3ee';
                ctx.fillRect(this.x + 5, drawY + 25, 30, 3);
                ctx.fillRect(this.x + 18, drawY + 15, 4, 30);

                // Leuchtender Kern
                ctx.shadowBlur = 20;
                ctx.fillRect(this.x + 12, drawY + 20, 16, 16);
                ctx.fillStyle = '#fff';
                ctx.fillRect(this.x + 16, drawY + 24, 8, 8);

                // Helm
                ctx.shadowBlur = 10;
                ctx.fillStyle = '#334155';
                ctx.fillRect(this.x + 8, drawY - 3, 24, 22);

                // Visier
                ctx.fillStyle = '#0f172a';
                ctx.fillRect(this.x + 10, drawY + 4, 20, 8);
                ctx.fillStyle = '#22d3ee';
                ctx.fillRect(this.x + 12, drawY + 6, 16, 4);

                // Beine (animiert beim Laufen)
                ctx.fillStyle = '#0f172a';
                if (this.velocityY !== 0) {
                    ctx.fillRect(this.x + 8, drawY + 42, 10, 8);
                    ctx.fillRect(this.x + 22, drawY + 38, 10, 8);
                } else {
                    const legAnim = Math.sin(frame * 0.3) * 4;
                    ctx.fillRect(this.x + 8, drawY + 45 + legAnim, 10, 6);
                    ctx.fillRect(this.x + 22, drawY + 45 - legAnim, 10, 6);
                }

                ctx.restore();
            }
        };

        // === HINDERNIS/ITEM SPAWNEN ===
        function spawnObstacle() {
            const isFood = Math.random() < 0.5;

            if (isFood) {
                // Energie-Orb (gr√ºn)
                const heights = [340, 220, 120];
                obstacles.push({
                    x: 850,
                    y: heights[Math.floor(Math.random() * heights.length)],
                    w: 30,
                    h: 30,
                    type: 'food',
                    frame: 0
                });
            } else {
                // Gefahr-Spike (rot)
                obstacles.push({
                    x: 850,
                    y: 365,
                    w: 40,
                    h: 35,
                    type: 'spike',
                    frame: 0
                });
            }
        }

        // === PARTIKEL-SYSTEM ===
        function createParticles(x, y, color, count) {
            for (let i = 0; i < count; i++) {
                particles.push({
                    x, y,
                    vx: (Math.random() - 0.5) * 10,
                    vy: (Math.random() - 0.5) * 10,
                    life: 30,
                    color,
                    size: Math.random() * 4 + 2
                });
            }
        }

        // === SPIEL STARTEN ===
        function startGame() {
            document.getElementById('start-screen').classList.add('hidden');
            document.getElementById('game-over-screen').classList.add('hidden');

            score = 0;
            energy = 100;
            gameSpeed = 5;
            obstacles = [];
            particles = [];
            frame = 0;

            player.y = 320;
            player.velocityY = 0;
            player.jumps = 0;
            player.isHurt = false;

            energyInner.style.width = '100%';
            scoreEl.innerText = '0';
            levelEl.innerText = '1';

            gameActive = true;
            update();
        }

        // === GAME LOOP ===
        function update() {
            if (!gameActive) return;

            // Hintergrund
            ctx.fillStyle = '#0a0a1a';
            ctx.fillRect(0, 0, 800, 450);

            // Cyber-Grid
            ctx.strokeStyle = '#1e1e3a';
            ctx.lineWidth = 1;
            const gridOffset = (frame * gameSpeed / 2) % 50;
            for (let i = 0; i < 900; i += 50) {
                ctx.beginPath();
                ctx.moveTo(i - gridOffset, 0);
                ctx.lineTo(i - gridOffset, 450);
                ctx.stroke();
            }
            for (let i = 0; i < 500; i += 50) {
                ctx.beginPath();
                ctx.moveTo(0, i);
                ctx.lineTo(800, i);
                ctx.stroke();
            }

            // Boden mit Neon-Glow
            ctx.fillStyle = '#0f172a';
            ctx.fillRect(0, 400, 800, 50);
            ctx.shadowBlur = 10 + Math.sin(frame * 0.1) * 5;
            ctx.shadowColor = '#a855f7';
            ctx.fillStyle = '#a855f7';
            ctx.fillRect(0, 400, 800, 3);
            ctx.shadowBlur = 0;

            // Spieler updaten & zeichnen
            player.update();
            player.draw();

            // Spawning
            frame++;
            if (frame % Math.floor(90 - gameSpeed * 2) === 0) {
                spawnObstacle();
            }

            // Hindernisse updaten
            for (let i = obstacles.length - 1; i >= 0; i--) {
                const o = obstacles[i];
                o.x -= gameSpeed;
                o.frame++;

                ctx.save();
                ctx.translate(o.x + o.w / 2, o.y + o.h / 2);

                if (o.type === 'food') {
                    // Energie-Orb zeichnen
                    const pulse = Math.sin(o.frame * 0.15) * 0.2;
                    ctx.scale(1 + pulse, 1 + pulse);
                    ctx.shadowBlur = 20;
                    ctx.shadowColor = '#4ade80';

                    ctx.fillStyle = '#166534';
                    ctx.beginPath();
                    ctx.arc(0, 0, 12, 0, Math.PI * 2);
                    ctx.fill();

                    ctx.fillStyle = '#4ade80';
                    ctx.beginPath();
                    ctx.arc(0, 0, 8, 0, Math.PI * 2);
                    ctx.fill();

                    ctx.fillStyle = '#fff';
                    ctx.globalAlpha = 0.5 + Math.sin(o.frame * 0.2) * 0.5;
                    ctx.beginPath();
                    ctx.arc(-2, -2, 3, 0, Math.PI * 2);
                    ctx.fill();
                    ctx.globalAlpha = 1;
                } else {
                    // Spike zeichnen
                    ctx.shadowBlur = 15;
                    ctx.shadowColor = '#f43f5e';

                    ctx.fillStyle = '#7f1d1d';
                    ctx.beginPath();
                    ctx.moveTo(0, -15);
                    ctx.lineTo(15, 15);
                    ctx.lineTo(-15, 15);
                    ctx.closePath();
                    ctx.fill();

                    ctx.fillStyle = '#f43f5e';
                    ctx.beginPath();
                    ctx.moveTo(0, -10);
                    ctx.lineTo(10, 12);
                    ctx.lineTo(-10, 12);
                    ctx.closePath();
                    ctx.fill();

                    // Warnsymbol
                    ctx.fillStyle = '#fff';
                    ctx.fillRect(-2, -4, 4, 8);
                    ctx.fillRect(-2, 6, 4, 3);
                }
                ctx.restore();

                // Kollisionserkennung (AABB)
                if (player.x < o.x + o.w &&
                    player.x + player.w > o.x &&
                    player.y < o.y + o.h &&
                    player.y + player.h > o.y) {

                    if (o.type === 'food') {
                        // MATHEMATIK: Energie gewinnen
                        energy = Math.min(100, energy + ENERGY_GAIN);
                        score += 10;
                        scoreEl.innerText = score;
                        energyInner.style.width = energy + '%';
                        createParticles(o.x + 15, o.y + 15, '#4ade80', 10);

                        // Level-Up alle 100 Punkte
                        if (score % 100 === 0) {
                            gameSpeed += 0.5;
                            levelEl.innerText = Math.floor(score / 100) + 1;
                        }
                    } else {
                        // MATHEMATIK: Energie verlieren
                        if (!player.isHurt) {
                            energy = Math.max(0, energy - ENERGY_LOSS);
                            energyInner.style.width = energy + '%';
                            player.isHurt = true;
                            player.hurtTimer = 30;
                            createParticles(player.x + 20, player.y + 25, '#f43f5e', 12);

                            if (energy <= 0) {
                                gameActive = false;
                                finalScoreEl.innerText = score;
                                document.getElementById('game-over-screen').classList.remove('hidden');
                            }
                        }
                    }
                    obstacles.splice(i, 1);
                    continue;
                }

                if (o.x < -50) obstacles.splice(i, 1);
            }

            // Partikel updaten
            for (let i = particles.length - 1; i >= 0; i--) {
                const p = particles[i];
                p.x += p.vx;
                p.y += p.vy;
                p.life--;

                ctx.fillStyle = p.color;
                ctx.globalAlpha = Math.max(0, p.life / 30);
                ctx.fillRect(p.x - p.size / 2, p.y - p.size / 2, p.size, p.size);

                if (p.life <= 0) particles.splice(i, 1);
            }
            ctx.globalAlpha = 1;

            requestAnimationFrame(update);
        }

        // === STEUERUNG ===
        function jump() {
            if (!gameActive) return;
            player.jump();
        }

        // Tastatur
        window.addEventListener('keydown', (e) => {
            if (e.code === 'Space') {
                e.preventDefault();
                jump();
            }
        });

        // Maus & Touch
        canvas.addEventListener('mousedown', jump);
        canvas.addEventListener('touchstart', (e) => {
            e.preventDefault();
            jump();
        });
    </script>
</body>

</html>